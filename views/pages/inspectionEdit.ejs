<% layout("/layouts/boilerplate") %>
<div class="action-page">
  <% include ../partials/profileHeader %>
  <section class="inspections">
    <% if (profile.inspections.length) { %>
    <h2 class="checklist-header">Select inspections you wish to delete</h2>
    <form
      action="/home/<%=currentUser.username%>/profiles/<%=profile._id%>/inspections/destroy?_method=DELETE"
      method="POST"
      onsubmit="return deleteConfirmation();"
      class="inspection-delete-form"
    >
      <div>
        <% for (const [index, inspection] of profile.inspections.entries()) { %>
        <section class="checklist-item">
          <label class="checkbox">
            <input
              type="checkbox"
              name="cbs[]"
              id="<%=index%>"
              value="<%=inspection._id%>"
            />
            <p class="title"><%=inspection.title%></p>
            <i class="fas fa-check checkmark"></i>
          </label>
          <hr />
        </section>
        <% } %>
      </div>
      <button class="btn btn-delete btn-inspection-delete">
        Delete Selected
      </button>
    </form>
    <% } %>
  </section>
</div>
<script>
  function deleteConfirmation() {
    return confirm("Are you sure? This action is irreversible...");
  }
</script>
