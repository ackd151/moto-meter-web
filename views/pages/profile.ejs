<% layout("/layouts/boilerplate") %>
<div class="action-page">
  <% include ../partials/profileHeader %>
  <section class="profile__page-grid">
    <div class="profile__info">
      <h2 class="profile__title"><%= profile.title %></h2>
      <div class="profile__image">
        <img src="/images/ktm.jpg" alt="profile picture" />
      </div>
      <p>
        Current hours:
        <a
          href="/home/<%=currentUser.username%>/profiles/<%=profile._id%>/post-ride"
          class="link"
          ><%= profile.hours %></a
        >
      </p>
      <form
        action="/home/<%=currentUser.username%>/profiles/<%=profile._id%>?_method=DELETE"
        method="POST"
        onsubmit="return deleteConfirmation();"
      >
        <button class="btn-delete">
          <i class="fas fa-trash"></i>Delete this profile?
        </button>
      </form>
    </div>
    <div class="profile__edit-form-div">
      <h3 class="edit-form-trigger">Edit Bike Profile</h3>
      <form
        action="/home/<%=currentUser.username%>/profiles/<%=profile._id%>?_method=PATCH"
        method="POST"
        class="profile-edit-form"
      >
        <h3 class="form-header">Edit Bike Profile</h3>
        <div class="grid-item">
          <label for="year">YEAR</label>
          <input
            type="text"
            id="year"
            name="profile[year]"
            placeholder="manufacture year"
            value="<%=profile.year%>"
            required
          />
        </div>
        <div class="grid-item">
          <label for="make">MAKE</label>
          <input
            type="text"
            id="make"
            name="profile[make]"
            placeholder="manufacturer"
            value="<%=profile.make%>"
            required
          />
        </div>

        <div class="grid-item">
          <label for="model">MODEL</label>
          <input
            type="text"
            id="model"
            name="profile[model]"
            placeholder="model series"
            value="<%=profile.model%>"
            required
          />
        </div>
        <div class="grid-item">
          <label for="hours">HOURS</label>
          <input
            type="text"
            id="hours"
            name="profile[hours]"
            placeholder="Current engine hours"
            value="<%=profile.hours%>"
            required
          />
        </div>
        <button class="btn form-submit">SUBMIT EDITS</button>
      </form>
    </div>
  </section>
</div>
<script>
  function deleteConfirmation() {
    return confirm("Are you sure? This action is irreversible...");
  }
</script>
